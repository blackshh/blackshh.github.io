<html>
  <head>
    <title>java使用移位运算进行进制转化 - blackshh</title>
    <link href='/images/fav.png' rel='shortcut icon'>
<link href='/atom.xml' rel='alternate' type='application/rss+xml'>
<link rel="stylesheet" href="/css/style.css">
<link rel="stylesheet" href="/css/highlight.css">
<link rel="stylesheet" href="/css/responsive.css">
<script src="/js/jquery.js"></script>
<script src="/js/basics.js"></script>
<meta content='width=device-width, initial-scale=1.0, user-scalable=no' name='viewport'>
<meta content='text/html; charset=utf-8' http-equiv='content-type'>


  </head>
  <body>
    <header>
  <a id='go-back-home' href='/'><img src='/images/scribble.png' alt='Home' width='70' height='70'></a>
  <p>blackshh</p>
  <p>纸上得来终觉浅，绝知此事要躬行。</p>
</header>

    <div id='container'>
      <div class='block'>
  
    <a class='main' href='/'>Blog</a>
  
    <a class='main' href='/about'>About</a>
  
    <a class='main' href='mailto:blackshh@qq.com'>Email</a>
  
    <a class='main' href='https://github.com/blackshh'>Github</a>
  
</div>

      <section class='paging'>
  
    <div class='left'>
      <a href='/2017/07/18/《摔跤吧爸爸》影评/'>
        ‹
      </a>
    </div>
  
  
</section>

      <div class='content'>
        <section class='post'>
          <h1>
            
            java使用移位运算进行进制转化
          </h1>
          <p>最近在练习进制转换算法，学习了一种使用移位运算进行进制的方法分享给大家。</p>
<ul>
<li>16进制转换8进制</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">问题描述:</span><br><span class="line">输入格式</span><br><span class="line">	输入的第一行为一个正整数n （<span class="number">1</span>&lt;=n&lt;=<span class="number">10</span>）。</span><br><span class="line">	接下来n行，每行一个由<span class="number">0</span>~<span class="number">9</span>、大写字母A~F组成的字符串，</span><br><span class="line">	表示要转换的十六进制正整数，每个十六进制数长度不超过<span class="number">100000</span>。</span><br><span class="line">   输出格式</span><br><span class="line">    输出n行，每行为输入对应的八进制正整数。</span><br><span class="line">注意</span><br><span class="line">	输入的十六进制数不会有前导<span class="number">0</span>，比如<span class="number">012</span>A。输出的八进制数也不能有前导<span class="number">0</span>。</span><br><span class="line">样例输入</span><br><span class="line">	<span class="number">239123</span>ABC</span><br><span class="line">样例</span><br><span class="line">    <span class="number">71</span></span><br><span class="line">    <span class="number">4435274</span></span><br></pre></td></tr></table></figure>
<p> 我一开始的解法，1个16进制数可以转化为4个2进制数，再通过每3个二进制数可以转化为1个8进制数。不过有一点需要注意转化成8进制数要从2进制字符串后面开始，到最前面时需要判断还剩下几位，不够3位要补0。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> 十六进制转八进制;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.text.DecimalFormat;</span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"><span class="keyword">import</span> java.util.Stack;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">	<span class="keyword">static</span> Scanner scan = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">	<span class="keyword">static</span> DecimalFormat decimalFormat=<span class="keyword">new</span> DecimalFormat(<span class="string">"0000"</span>);</span><br><span class="line">	<span class="keyword">static</span> DecimalFormat d2=<span class="keyword">new</span> DecimalFormat(<span class="string">"000"</span>);</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">change</span><span class="params">(String str)</span></span>&#123;</span><br><span class="line"></span><br><span class="line">		String s = <span class="string">""</span>;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">int</span> top = <span class="number">0</span>;</span><br><span class="line">		<span class="keyword">char</span>[] c = str.toCharArray();	</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> k = <span class="number">0</span>; k &lt; c.length; k++) &#123;</span><br><span class="line">			<span class="keyword">if</span> (c[k] &gt;= <span class="string">'0'</span> &amp;&amp; c[k] &lt;= <span class="string">'9'</span>) &#123;		</span><br><span class="line">				s+=decimalFormat.format(Integer.parseInt(Integer.toBinaryString(c[k]-<span class="number">48</span>)));</span><br><span class="line">			&#125;<span class="keyword">else</span> <span class="keyword">if</span>(c[k] &gt;= <span class="string">'A'</span> &amp;&amp; c[k] &lt;= <span class="string">'F'</span>)&#123;</span><br><span class="line">				s+=decimalFormat.format(Integer.parseInt(Integer.toBinaryString(c[k]-<span class="number">55</span>)));</span><br><span class="line">			&#125;	</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">int</span> num = s.length();</span><br><span class="line">		<span class="keyword">if</span>(num%<span class="number">3</span>==<span class="number">1</span>)</span><br><span class="line">			s=<span class="string">"00"</span>+s;</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span>(num%<span class="number">3</span>==<span class="number">2</span>)</span><br><span class="line">			s=<span class="string">"0"</span>+s;</span><br><span class="line">		<span class="keyword">if</span>(s.substring(<span class="number">0</span>, <span class="number">3</span>).equals(<span class="string">"000"</span>))&#123;</span><br><span class="line">			s=s.substring(<span class="number">3</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; s.length(); i=i+<span class="number">3</span>) &#123;</span><br><span class="line">			</span><br><span class="line">			String xStr = s.substring(i,i+<span class="number">3</span>);</span><br><span class="line">			System.out.print(Integer.parseInt(xStr.substring(<span class="number">0</span>,<span class="number">1</span>))*<span class="number">4</span>+</span><br><span class="line">					 			Integer.parseInt(xStr.substring(<span class="number">1</span>,<span class="number">2</span>))*<span class="number">2</span>+</span><br><span class="line">					 			Integer.parseInt(xStr.substring(<span class="number">2</span>,<span class="number">3</span>))*<span class="number">1</span>);</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123; </span><br><span class="line">		<span class="keyword">int</span> n = Integer.parseInt(scan.nextLine());</span><br><span class="line">		String[] strs = <span class="keyword">new</span> String[n];</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; strs.length; i++) &#123;		</span><br><span class="line">			strs[i] = scan.nextLine();		</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; strs.length; i++) &#123;</span><br><span class="line">			change(strs[i]);</span><br><span class="line">			System.out.println();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>使用题目给的测试可以通过，我自己设置的测试数据也可以通过，然后去蓝桥杯测试平台上跑结果炸了！去看测试数据，10个16进制数，最长的10万位，估计是溢出了。去调试发现是在2进制转化为8进制的时候出错了，for循环次数太多了。for里还有数值运算比较费时，改了好久测试总是通不过。去百度发现一种运用java移位运算进行转化的，写了试了一下发现可以通过了。</p>
<p><strong>使用java移位运算符进行转化</strong><br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line">import java.util.Scanner;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">static</span> void main(String[] args) &#123;</span><br><span class="line">     <span class="keyword">new</span> Main().systemScanner();</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="keyword">public</span> void systemScanner() &#123;</span><br><span class="line">     Scanner jin = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">     <span class="keyword">while</span> (jin.hasNext()) &#123;</span><br><span class="line">         int length = jin.nextInt();</span><br><span class="line">         <span class="keyword">for</span> (int i = <span class="number">0</span>; i &lt; length; i++)&#123;</span><br><span class="line">             String strTmp=jin.next();</span><br><span class="line">             tranform(strTmp.toCharArray(), strTmp.length());</span><br><span class="line">         &#125;</span><br><span class="line">     &#125;</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="comment">/*</span></span><br><span class="line"><span class="comment">  * 3位16进制等价于4位8进制</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"> int[] stack=<span class="keyword">new</span> int[<span class="number">40000</span>];</span><br><span class="line"> <span class="keyword">public</span> void tranform(char[] str, int length) &#123;</span><br><span class="line">     char[] buff = <span class="keyword">new</span> char[<span class="number">4</span>];</span><br><span class="line">     int top = <span class="number">-1</span>;</span><br><span class="line">     <span class="keyword">for</span> (int i = length - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i -= <span class="number">3</span>) &#123;</span><br><span class="line">         int sum = <span class="number">0</span>;</span><br><span class="line">         <span class="keyword">for</span> (int j = <span class="number">0</span>; j &lt; <span class="number">3</span> &amp;&amp; i - j &gt;= <span class="number">0</span>; j++) &#123;<span class="comment">// i-j&gt;=0防止不够三个的情况</span></span><br><span class="line">             int tmp = str[i - j] &gt;= <span class="string">'0'</span> &amp;&amp; str[i - j] &lt;= <span class="string">'9'</span> ? str[i - j] - <span class="string">'0'</span>: str[i - j] - <span class="string">'A'</span> + <span class="number">10</span>;<span class="comment">//区分是数字，还是字符，进行对应转换</span></span><br><span class="line">             sum+=(tmp&lt;&lt;(<span class="number">4</span>*j));<span class="comment">//这句很重要，通过这句就可以从16变成10进制了。</span></span><br><span class="line">         &#125;</span><br><span class="line">         stack[++top]=sum;<span class="comment">//sum的结果是16进制转化10进制的结果，每3个16进制变成10进制，再变8进制</span></span><br><span class="line">     &#125;</span><br><span class="line">     <span class="keyword">while</span>(stack[top]==<span class="number">0</span>)&#123;<span class="comment">//排除前导为0的判断</span></span><br><span class="line">         top--;</span><br><span class="line">     &#125;</span><br><span class="line">     <span class="keyword">for</span>(int i=top;i&gt;=<span class="number">0</span>;i--)&#123;</span><br><span class="line">         String str1=Integer.toOctalString(stack[i]);<span class="comment">//从10进制转化成8进制</span></span><br><span class="line">         <span class="keyword">if</span>(i!=top&amp;&amp;str1.length()&lt;<span class="number">4</span>)&#123;</span><br><span class="line">             <span class="comment">//不是最左边的一个，就不用去掉前导0,而默认是去掉0的，所以要进行补会</span></span><br><span class="line">             <span class="keyword">for</span>(int y=<span class="number">0</span>;y&lt;<span class="number">4</span>-str1.length();y++)</span><br><span class="line">                 System.out.<span class="keyword">print</span>(<span class="string">"0"</span>);</span><br><span class="line">         &#125;</span><br><span class="line">         System.out.<span class="keyword">print</span>(str1);</span><br><span class="line">     &#125;</span><br><span class="line">     System.out.println();</span><br><span class="line">     &#125;</span><br><span class="line">&#125;</span><br><span class="line">``` </span><br><span class="line">这种解法的思路是：<span class="number">1</span>位<span class="number">16</span>进制可以代表<span class="number">4</span>位<span class="number">2</span>进制， <span class="number">1</span>位<span class="number">8</span>进制可以代表<span class="number">3</span>位二进制，得出<span class="number">3</span>位<span class="number">16</span>进制求和入栈输出表示<span class="number">4</span>位<span class="number">8</span>进制，然后出栈输出。由<span class="number">16</span>进制转化为<span class="number">10</span>进制的时候，使用 &lt;&lt; 使<span class="number">16</span>进制数转化为<span class="number">8</span>进制。</span><br><span class="line"></span><br><span class="line">例子：</span><br><span class="line"></span><br><span class="line">``` java</span><br><span class="line"><span class="number">0x11</span> &lt;&lt; <span class="number">4</span> =&gt; <span class="number">17</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">11的二进制编码是 1011，个位是1 编码是0001，十位是1 编码也是0001。</span></span><br><span class="line"><span class="comment">根据位数进行移位运算，个位左移(4*0)位还是0001，十位左移(4*1)位变成00010000</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="number">0001</span> &lt;&lt; <span class="number">4</span>*<span class="number">1</span> = <span class="number">00010000</span>; <span class="number">0001</span> &lt;&lt; <span class="number">4</span>*<span class="number">0</span> = <span class="number">0001</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">整个数就变成了00010001 也就是10001 转换为10进制是为17。这里可以看到一个16进</span></span><br><span class="line"><span class="comment">制数通过按位数分别左移4*(n-1)位就可以转化为10进制数了。具体的原因是每一个整</span></span><br><span class="line"><span class="comment">数左移4位等于这数的二进制表示后面多了4个0，相当于2进制乘法乘了一个二进制10000()。</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="number">1</span>*<span class="number">16</span>^<span class="number">1</span>+<span class="number">1</span>*<span class="number">16</span>^<span class="number">0</span> = <span class="number">17</span>;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">10000转化为10进制为16也就是每位乘了16^(n-1)进而把一个16进制数转化为10进制数。</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure></p>
<p>这种算法的效率非常高，运算十分较少。可以通过蓝桥杯测试系统的变态数据。</p>

          <br>
<div class='date' style="text-align: right">
    <p><strong>blackshh</strong></p>
    <p>2017-03-22</p>
</div>



        </section>
      </div>
      
      <div class='block'>
  
    <a class='main' href='/'>Blog</a>
  
    <a class='main' href='/about'>About</a>
  
    <a class='main' href='mailto:blackshh@qq.com'>Email</a>
  
    <a class='main' href='https://github.com/blackshh'>Github</a>
  
</div>

    </div>
    <footer>
  <span class='muted'>blackshh@2017</span><br>
  <span>built with Hexo using <a class='muted' href="https://github.com/chloerei/scribble">Scribble</a></span>
  <br>
  <br>
</footer>

  </body>
</html>
